<?phpnamespace App\Model;use Illuminate\Database\Eloquent\Model;use PDO;class Action extends Model{    public function Action($data)    {    	if($data['action'] == "modify") {    		if(!isset($data['idy']))    			return $this->modify($data);    		else    			return $this->modifyIdy($data);    	} else {    		return $this->delData($data['id'],$data['table']);    	}    }    private function delData($id, $table)    {    	$conn = connect();    	$query = "    		DELETE FROM $table    		WHERE id = $id    	";    	$conn->query($query);    	return "success";    }    private function modify($data)    {    	$conn = connect();    	$query = "    		UPDATE userdata    		SET name = ?, account = ?, password = ?    		WHERE id = ?    	";    	$result = $conn->prepare($query);    	$result->execute(array($data['name'],$data['account'],$data['pwd'],$data['id']));    	return "success";    }    private function modifyIdy($data)    {    	$conn = connect();    	$query = "    		UPDATE userdata    		SET identity = ?    		WHERE id = ?    	";    	$result = $conn->prepare($query);    	$result->execute(array($data['idy'],$data['id']));    	$query = "    		SELECT *    		FROM userdata    		WHERE id = ?    	";    	$result = $conn->prepare($query);    	$result->execute(array($data['id']));    	$row = $result->fetch(PDO::FETCH_ASSOC);    	$idy = $row['identity'];        $tr = "";    	$time = $row["update_time"];        $count = $data['count'];       	if($idy == "admin") {            $count++;    		$tr = "<tr id=A_ud".$data['id']." align=\"center\"><td>".$count."</td><td>".$row["name"]."</td><td>".$row["account"]."</td><td>*****</td><td>".$row["register_time"]."</td><td>".$time."</td></tr>";        } else            $count--;    	$value = array(    		'ans' => "success"    		, 'idy' => $idy    		, 'time' => $time    		, 'tr' => $tr            , 'count' => $count    	);    	return $value;    }}